# 아주대학교 24학번 데이터분석프로그래밍 지오텍 조
**서울 지하철 승하자 인원 변동에 따른 주변 상권 매출 상관 분석**
## 프로젝트 소개
데이터 분석 프로그래밍 프로젝트로서, 서울교통공사에서 관할하는 서울 내 지하철역 위치와 2022년~2023년 승하차 인원 수의 변동을 가시화하고, 승하차 인원 수 - 지하철역이 속한 행정동의 매출 변동 추이를 상관 분석하여 관계성을 가시화하였습니다.
## 구성
  * geotech.py : csv 파일 Data를 기반으로 html 결과물을 생성
  * 2022/2023 count/매출.csv 파일 : 공공데이터포탈에서 다운로드한 2022년~2023년 서울교통공사 관할 지하철역의 월간 승하차 인원 수, 서울시 행정동별 분기 상권 매출
  * staion_with_region.csv : 공공데이터포탈에서 다운로드한 서울교통공사 역 기준정보 Data에, Kakaomap API 호출을 통해 경/위도 기준 행정동 정보를 Merge한 기준정보
  * (temp) kakao_region_api : 기준정보 데이터 생성 과정에서 역 경/위도 정보를 기반으로 행정동 정보를 얻기 위해 작성한 임시 API 호출 코드
## 실행 방법
  * geotech.py 파일 및 전체 csv 파일을 동일 경로에 다운로드하고, geotech.py 파일 실행
  * 코드 실행 전 pip install 필요 (pandas, numpy, folium, plotly)
## 사용 기술
  * pandas, numpy
  * folium : 지리정보
  * plotly : Data 가시화(동적 그래프) / Matplotlib의 경우, html 파일 생성 시 속도 저하 및 동적 그래프 활용이 힘들어 plotly로 대체
  * html : html 내 html 요소 생성(기준정보 출력, 요약 정보 사이드바 제공)
  * javascript : 사이드바에서 역 이름 클릭 시 Focus 동작을 위해 활용
  * 분석 기법 - 상관 분석 : 승하차 인원 변동 - 상권 매출 변동 간의 상관 관계를 피어슨 상관 계수로 분석 및 가시화
## 결과물 설명
  * 원형 마커
    + 위치 : 지하철역의 경/위도 값
    + 크기 : 승하차 인원 수에 비례하여 증가
    + 색상 : 2022년 대비 2023년의 승하차 인원 수의 증가 폭이 클수록 진한 파란색 / 감소 폭이 클수록 진한 빨강색으로 표현
  * 역별 그래프 팝업
    + 팝업 조건 : 마커 클릭
    + 역의 명칭, 호선 및 주소 정보 표시
    + 2022년~2023년 해당 역의 승하차 인원 변동과 상권 매출 변동을 꺾은선 그래프로 표현 (그래프 위에 Mouse-over 시, 연/월과 값 표시)
     - 승하차 인원 변동은 월별, 상권 매출 변동은 분기별로 표현 (공공데이터에서 분기별로만 제공)
    + 해당 역의 승하차 인원 변동과 상권 매출 변동을 상관 분석하여 피어슨 상관계수 값 표시
  * 사이드 바
    + 2022년 대비 2023년의 승하차 인원 수 증가/감소율 TOP3 제공 : 역 이름 클릭 시 해당 역으로 이동 및 Focus
    + 전체 역의 평균 피어슨 상관 계수 표시
